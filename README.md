# 輝光管時鐘製作記錄

![時鐘成品](https://github.com/user-attachments/assets/4f422308-13c9-403f-8024-2359b2cda493)



- [手搓輝光管 Arduino 時鐘 - B站影片](https://www.bilibili.com/video/BV1f31gYLEiL/?share_source=copy_web&vd_source=17521cbd088477c140b597f64646ffe3)



目前成品放在辦公室，看著時間一分一秒流逝。時鐘的背面為了讓正面只看得到元件，看起來比較整潔，所以將焊接、線路都放到底部。
![orig (2)](https://github.com/user-attachments/assets/cc8a0b39-b5f0-42ad-be37-c314992d429f)

---

## 前言：

想做個side project, 但不想單純做純軟體的東西, 偶然看到非常具有歷史的「輝光管」,輝光管是透過將玻璃管內部灌入氖氣, 並在氣體中將金屬導高電壓, 就會在金屬附近產生橘色的顏色, 仔細看會發現發光的地方是金屬周圍的氣體發光。

偶然看網路上有人在做這個, 心裡想應該不是很難, 應該做得到, 確實寫code大概一天就完成了, 因為點位較多, 甚至因為有LED燈當作冒號, 所以有一個點位還是共用的, 因為自己先在網路上買需要的東西, 結果做的過程中, 陸續去了電子材料行5 次才完成。

順便記錄一下總共需要哪些東西, 給也想試看看的人分享一下, 可以不用走那麼多趟材料行, 我會把需要買的材料列出, 也把source code貼上來, 想復刻的可以當個參考（寫code的時候還想說要把程式寫的很優雅，就把關於ic方面的還弄出一個類，結果寫到後來直接把程式都放在main了，之後有時間在把main的程式搬到nixie tube 內放，看起來比較整潔，不過就看之後有心力吧，畢竟程式只要沒有問題，就不要再去改神聖的代碼。


## step1.製作輸入電壓（下圖是改成電容以前的未成品圖）

發生一個有趣的事, 因為原本電源是使用9V, 透過LM7805將電壓穩壓成 5V, 當做後面電路的穩壓其實是可以的, 但缺點就是右上角這顆LM7805時不時就在發燙, 當初在材料行看到這個穩壓覺得很酷, 雖然明顯是殺雞用牛刀,

在製作完成時鐘後, 放在辦公室一陣子, 剛好被老闆看到這東西, 他剛好也是學電路的, 就推薦我直接將電源使用IPhone豆腐頭即可, 還直接跟我說, 我們後面很多電容, 我拿一些給你, 於是左下角的穩壓器就被換掉了, 這邊補充一下, 因為LM7805是穩壓成5V, 所以如果豆腐頭的5V直接讓LM7805穩壓是行不通的, 應該至少要高於0.7V, 也就是需要一個5.7v才能讓後續電力正常，於是最終就換成電容, 畢竟老闆給建議了, 再不換就對不起老闆的電容。

![orig](https://github.com/user-attachments/assets/a46b9b48-a974-49f3-a5ff-869a9af4d38f)


## step2.輸入電壓處理

透過電容濾波後的電壓, 將豆腐頭輸入進來的5V透過電容穩壓, 其實一個電容就非常夠, 但因為將LM7805改成電容後, 空間非常夠, 所以就用2組串聯的電容,

備註:電容串聯應該是「耐壓」升高, 並聯應該是容儲存的「電容量」增加, 比如我用2個20V的電容串連的話, 耐壓就變40V, 再將兩組的電容為1000μF並聯, 則會得到2000μF。

在豆腐頭剛進入時，先經過保險絲後，接著就要加個二極體, 防止豆腐頭出什麼毛病，後續才經過電容。

![S__36790275](https://github.com/user-attachments/assets/7736ab03-bee6-4d40-a085-207b7d77fb3a)


## step3. 製作 5V轉170V升壓模組

首先輸入的5V直流電（豆腐頭提供）轉成輝光管所需的電壓, 約160V, 當時因為不想要再自己做變壓器, 買的板子如果再加上變壓器可能會更難, 也可能更做不出來..., 所以就用這個直接轉成高壓

去淘寶買的升壓模組,保險起見, 可以看到照片，我把正面的接點都用絕緣膠帶貼起來, 之前就是可能焊接的接點比較大, 接電後, 就有火花, 剛開始做就看到煙火秀, 淘寶搜一下「5V-9V升170V小型升压模块」應該就找得到。
![orig (1)](https://github.com/user-attachments/assets/0d38b692-e403-4f17-9fea-cf7f041721f0)


## step 4 .製作DS1302模組

DS1302模組是一款常見的「實時時鐘」（RTC, Real-Time Clock）芯片模組，能夠提供實時的秒、分、時、日、月、年等信息。
用紐扣電池應該就能保持幾年的時間讓改模組一直計算時間，在斷電後繼續保持時間的計算, 也就是透過「石英振蕩器」 不斷計算現在過了幾秒, 跟以前電腦內也會有一個這種模組應該是同一個功用。
順帶一提, 如果有預算的話, 建議另外買好一點的32.768 kHz 石英振蕩器, 我是買下圖這個, 然後拆下來用的, 結果發現一個月差了快十分鐘, 而且還是一陣子比較快、一陣子比較慢，連我在程式內想直接一天加多少秒都無法。

而這個計算的模組, 在arduino 內也有人有寫好的模組, 直接拿來用就行，也在我的git內，直接下載下來就在那個包內了。
![orig (3)](https://github.com/user-attachments/assets/e275c5a3-12a5-41e1-8329-d5fe9e044498)



## step5. 做個保險絲

這步應該是在最前面才對, 因為做完這個時鐘，半年了才想說寫個文章，當初怎麼個配線流程都忘了，最後會再寫個總配線流程，這裡就是在5V進入後就馬上串在這裡, 但我當初覺得保險絲盒放在正中間有種和諧感, 就放在中間了。

下圖如果有學過電路的應該不難理解, 保險絲跟LED燈是並聯, 如果保險絲沒有斷的話, 所有的電都會走保險絲, 如果保險絲燒斷, 所有的電會走LED, 進而達到提示的效果，告訴你短路了。

而保險絲該配多大的問題，問gpt吧，只是盡量不要配太細的，比如我之前是計算每個管子耗多少電流算出來的，但保險絲比如買個0.2A的反而可能讓改保險絲產生電阻，進而這邊產生壓降，導致arduino板、升壓模組等造成一系列問題，所以這裡就改用成2A，實際上多少的話，我就沒經驗了，做韌體的應該就很懂了。

![orig (2)](https://github.com/user-attachments/assets/6f9d9261-d698-442d-b408-f7fc35acb73c)


## step6.輝光管的IC控制

因為每個時鐘有0-9共10個點位要控制, 總共就有60個腳位, 但arduino nano板的腳位無法提供這麼多腳位, 這時候就透過以下的IC再搭配「74HC595 移位寄存器」, 就可以達到只透過３隻腳位 控制2個輝光管共20個腳位的功能, 也就是一個74HC595, 可以有8個IO, 而以下的K155ID1 只需要4個bit 就能控制, 也就是0000是0, 0111的話就是7，1000是8, 1001是9

而因為74HC595可以控制兩個管子，比如想顯示88，就是「10001000」，在比如想顯示24，就是「00100100」，這我應該是在暫存器的code內都寫好了。

輝光管也要記得要配一個10K的電阻，以下我有找到其他國外有人用這兩個IC搭配的圖片,左邊紅框就是1*10K 電阻 + 1* 管子 + 1* K155ID1*1 + 半邊的 74HC595 可以控制一個管子，也就是一個數字 ，而Arduino 要控制的，就是74HC595，進而再控制K155ID1。


![15611377040_c15f4eb0b9_o-2](https://github.com/user-attachments/assets/9ca2292b-cf2c-4ac0-84a6-3bf781130575)
- [以上圖片連結](https://www.plingboot.com/arduino-nixie-gps-clock-part-2/)
  


***這邊有一點要注意的, 下圖是nano板的輸出腳位，d的就是digital out數位輸出，輸出的是0、1，也是我在其他網站沒看到其他製作者提到的, 因為有時分秒要控制, 每一個74HC595就要佔用3隻接腳, 哪3隻可以看個教學影片就可以了, 這樣會導致需要9隻接腳, 再加上RTC時鐘模組, 就會導致LED 冒號不夠用, 我想到的方式, 是用 「時」這邊的某一個針腳來當LED的共同針腳, 因為小時 這邊的控制都是1小時才使用一次,使用後就沒用了, 於是就用小時的 3隻控制「74HC595」 的其中一隻接腳來控制LED, 有可能這個IC的其中一隻接腳也能共用就不用佔用那麼多, 總之我是這樣做的。

## step8. 製作輝光管支架

為了要讓管子正常站著, 當初也是想了很多方法, 最後用簡單又暴力的方式, 剛好身旁沒有時鐘, 只好截圖影片, 就是將一個螺絲固定在IC板後, 在固定到管子的管座, 至於六隻要怎麼樣保持同個角度、高度、彎度, 且凹彎前, 還要先把螺絲鎖上, 否則凹彎後, 螺帽會鎖不上去...

這就考驗掰彎的能力了, 想當初也是凹了8隻, 取了6隻比較相似的, 總之就是變變扭扭的彎好了。

至於輝光管的管座, 一方面是輝光管有壽命, 令一方面是這樣也才能有孔可以固定管子

## step9. 配線

接下來就是消耗自己腦力的配線, 配完線才發現其實單芯線應該要買耐熱的, 不然焊槍只要碰久一點, 就會讓白管套黑掉, 還會脫落, 記得焊接要用助焊劑, 元件針腳跟單芯線才會更好的融再一起

其實「第一版」配線沒有這條彎線, 是因為做好後, 後來又把LM7805改成電容, 需要有一個比較長的繞線, 之前也將所有的配線都配得比較高, 沒有都貼著板子, 就任性的把最後一條線繞成「黃金比例」, 這當然也是考慮掰彎的能力


## step 10. 製作按鍵

還是要設定時間、也想要手動可以執行清理管子的功能, 挑了按鍵按起來比較舒服的微動開關, 因為這開關的針腳比較大, 所以只好對PCB板鑽洞,左下角圖片當成是按鈕

微動開關也要加個電阻, 雖然好像說nano板本身就有內阻, 但我還是有加電阻

## step 11.總開關的製作

因為考慮到時鐘的管子其實壽命通常是幾萬小時, 為了耐用性, 即使已經有在每隔幾十分鐘就「清理輝光管」, 清理方式就是固定時間快速點亮所有的數字, 目的是為了均勻分佈輝光管內的氣體電離和放電，從而延長輝光管的使用壽命，並避免某些數字或部分發光電極過度使用而導致局部老化, 但我希望這個看起來很老的東西, 可以比我還長壽, 於是就做了一個開關, 在每天上班就打開、下班就關掉, 讓他變成一個「手動檔時鐘」

右下角紅色當成是總開關


## step.12 最後整理

最後要記得因為配完線要用酒精把整個板子刷一刷, 之前查了很久的配線, 結果發現只是因為助焊劑, 導致有些地方短路到

把管子、IC、控制板都拿掉的樣子, 洗過後, 曬一下會比較安全

還有LED冒號, 也是用個470歐姆的電阻+紅色LED當冒號



最後, 放個之前剛做完拍的照片




## 總材料：

- PCB板, 記得先買管子, 如果想要大隻的管子也可以, 看起來更有復古感
- 辉光管*6 我買的是 IN-12型號, 因為1 隻就要60人民幣了, 台灣買更貴, 所以我是在淘寶買的, 大隻輝光管就看預算
- 辉光管座*6
- K155ID1辉光管专用驱动*6
- 74HC595*3
- 微動開關*2
- 總開關*1
- Arduino nano*1
- 5V-9V升170V小型升压模块*1
- IC針腳座*9
- DS1302 模組*1
- 電容*1(用多個也可以)
- LED*4 冒號要有4個
- 470歐姆電阻*4
- 10K歐姆電阻*6
- 二極體*1
- nano板的針腳座*1 我是買大於2個針腳座的, 因為沒有nano專用的
- 幾根螺絲、螺帽

## 總配線流程：

- 豆腐頭DC5v＞保險絲＞二極體＞電容
- ＞原本的5v供給給以下
- ＞升壓模組＞供給給管子
- ＞nano主板
- ＞led, 讀ds1302, 給寄存器, 讀按鈕, 等等
- ＞供給給全部ic所需的5v
- ＞按鈕的高電壓

以上大部分看code也可以對照。

## 最後幾點做完後發現可以改善的地方：

1. led冒號的固定，我是直接找比較粗的鐵絲將正負極的線用熱縮管固定，現在還是還沒想到更好的方式
2. 從豆腐頭進入的電源可以買那種快速接頭，會更漂亮


感謝收看，有什麼錯誤資訊，或想問我的歡迎留言
